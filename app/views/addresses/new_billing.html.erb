<%= form_tag  create_billing_addresses_path do %>  
<div id="section_title" style="margin-left: 50px"><%= t('billing_address') %></div>
  <div id="input_form" class="col-xs-10 col-sm-5 col-md-5 col-lg-4">
	    <div class="field">
	      <%= label :name, t('address') %>
	      <%= text_field :address, :name %>
	    </div>
	    <div class="field">
	      <%= label :number, t('address_number') %>
	      <%= text_field :address, :number %>
	    </div>
	    <div class="field">
	      <%= label :floor, t('address_floor') %>
	      <%= text_field :address, :floor %>
	    </div>
	    <div class="field">
	      <%= label :city, t('city') %>
	      <%= text_field :city, :name %>
	    </div>
	    <div class="field">
	      <%= label :postal_code, t('postal_code') %>
	      <%= text_field :city, :postal_code %>
	    </div>
	    <div class="field">
	      <%= label :country, t('country') %>
	      <%= text_field :country, :name %>
	    </div>
    </div>
    <div id="purchuase">
	  <%= render(@cart) %>
	  <div id="entry-button">
	      <%= submit_tag(t('continue'), :class => 'buy_button')  %>
	      <div class="leave_button"> <a href="<%=store_url%>"><%= t('cancel') %></a></div>
	  </div>
	</div>
<% end %>
<script>
$(function(){
	$("#footer").css("position","absolute");
  // Textbox fields for validation

  var address_name = $("#address_name");
  var address_number = $("#address_number");
  var country = $("#country_name");
  var submit = $(".buy_button");
  // Functions
  function show_warning(field) {
    field.css("border-color", "#dd4b39"); 
    var warning_label = null;
    if (locale  == "bs")
      warning_label = $("<p></p>").text("Ovo polje ne mo≈æe ostati prazno.");
    else 
      warning_label = $("<p></p>").text("This field can't be empty.");
    warning_label.attr("class","warning");
    warning_label.css("color","#dd4b39");
    field.parent().append(warning_label);
  }
  function remove_warning(field) {
    field.parent().children("p").remove(".warning");
    field.css("border-color", "#b7b7b7");
  }
  function validate_field(field) {
    var number_of_children = field.parent().children().length;
    if (!field.val()) {
      
      if(number_of_children == 2) show_warning(field);
    }
    else {
      if (number_of_children > 2) remove_warning(field);
    }
  }

  address_name.blur(function(){
    validate_field($(this));
  });
  address_number.blur(function(){
    validate_field($(this));
  });
  country.blur(function(){
    validate_field($(this));
  });

    // Onsubmit validation
  $("form").submit(function() {
    var has_empty = false;
    $("#address_name,#address_number,#country_name", this).each(function() {
      if(!$(this).val()) {
        has_empty = true;
        validate_field($(this));      
      }
    });
    if (has_empty)  {
      return false;
    }
    return true;
  });
});
</script>